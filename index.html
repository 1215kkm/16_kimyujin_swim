<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>김유진 웹포트폴리오</title>
    <link rel="stylesheet" href="css/style.css">

</head>

<body>

    <nav class="float_menu">
        <a href="#">
            <img src="images/seashell1.png" alt="">
            <span class="title">INTRO</span>
        </a>
        <a href="#">
            <img src="images/seashell2.png" alt="">
            <span class="title">ABOUT</span>
        </a>
        <a href="#">
            <img src="images/seashell3.png" alt="">
            <span class="title">WORK</span>
        </a>
        <a href="#">
            <img src="images/seashell4.png" alt="">
            <span class="title">CONTACT</span>
        </a>
    </nav>


    <div class="section_box">
        <section id="section1">
            <div class="kimyujin_box abs">
                <img id="kimyujinImg" src="images/kimyujin1.png" alt="">
            </div>
            <div class="moon_box abs">
                <img src="images/moon_img.png" alt="">
            </div>
            <span class="balpan abs"></span>
            <div class="part1_text abs">
                <h2>
                    <span class="t1">Dive into Design</span>
                    <span class="t2">과감히 도전하고, 깊이 있게 완성하는</span>
                    <span class="t3">UX/UX 디자이너 김유진입니다.</span>
                </h2>
            </div>
            <div class="water">
                <img src="images/water_section2.png" alt="">
            </div>
        </section>


        <section id="section2">
            <div class="text">김유진</div>
            <img src="images/bg_section2.png" alt="">
        </section>


        <section id="section3">
            <div class="section_box">
                <div class="profile-container">
                    <h2 class="profile-title">PROFILE</h2>
                    <!-- Left Side - Profile Info -->
                    <div class="part3_content_box">
                        <div class="profile-left">
                            <div class="profile_box">
                                <div class="profile-image">
                                    <ul>
                                        <li class="profile1"><img src="images/yujin_img 1.png" alt="김유진 프로필 사진"></li>
                                        <li class="profile2"><img src="images/yujin_img 1.png" alt="김유진 프로필 사진"></li>
                                        <li class="profile3"><img src="images/yujin_img 1.png" alt="김유진 프로필 사진"></li>
                                        <li class="profile3"><img src="images/yujin_img 1.png" alt="김유진 프로필 사진"></li>
                                        <li class="profile3"><img src="images/yujin_img 1.png" alt="김유진 프로필 사진"></li>
                                    </ul>
                                </div>
                                <div class="text_box">
                                    <div class="name">
                                        <div class="profile-name">김유진</div>
                                        <div class="profile-name-eng">KIM YUJIN</div>
                                    </div>
                                    <div class="profile-birth">1995. 09. 20</div>
                                    <div class="profile-job">UX/UI 디자이너</div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side - Education & Skills -->
                        <div class="profile-right">
                            <!-- Education Section -->
                            <div class="education-section">
                                <h2 class="section-title">EDUCATION</h2>

                                <div class="education-item">
                                    <div class="education-date">2021. 08</div>
                                    <div class="education-desc">경희사이버대학교 시각미디어디자인전공 입학</div>
                                </div>

                                <div class="education-item">
                                    <div class="education-date">2025. 02</div>
                                    <div class="education-desc">경희사이버대학교 시각미디어디자인전공 졸업</div>
                                </div>

                                <div class="education-item">
                                    <div class="education-date">2025. 09</div>
                                    <div class="education-desc">그린컴퓨터아카데미 UX/UI 반응형 웹디자인 & 웹퍼블리셔 과정 수료</div>
                                </div>
                            </div>

                            <!-- Skills Section -->
                            <div class="skills-container">
                                <h2 class="section-title">SKILLS</h2>

                                <div class="skills-grid">
                                    <div class="skill-category">
                                        <h3>Design Tools</h3>
                                        <div class="skill-icons">
                                            <div class="skill-icon">
                                                <img src="images/figma_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/photoshop_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/illustrator_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/cafe24_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/imweb_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/html_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/css_icon.png" alt="Figma">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/js_icon.png" alt="Figma">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="skill-category">
                                        <h3>AI Tools</h3>
                                        <div class="skill-icons">
                                            <div class="skill-icon">
                                                <img src="images/gpt_icon.png" alt="AI Tool 1">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/midjourney_icon.png" alt="AI Tool 1">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/ideogram_icon.png" alt="AI Tool 1">
                                            </div>
                                            <div class="skill-icon">
                                                <img src="images/whisk_icon.png" alt="AI Tool 1">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>




        <section id="section4">
        </section>
    </div>









    <script src="script/jquery-3.7.1.js"></script>
    <script src="script/action.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1/bundled/lenis.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // 1) 새로고침 시 브라우저 스크롤 복원 방지
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        const img = document.querySelector("#kimyujinImg");
        const water = document.querySelector("#section1 .water");
        const maxIndex = 23;

        // 초기 강제 세팅 (1번 고정)
        img.src = `images/kimyujin1.png`;
        img.style.opacity = '1';
        water.style.display = 'none';
        water.style.bottom = '-80px';

        // 프레임 상태 + 스크롤 시작 여부 플래그
        const state = { frame: 1 };
        let hasUserScrolled = false; // 사용자가 실제 스크롤했는지

        // 2) 유저 스크롤 감지(한 번이라도 스크롤하면 true)
        const onUserScroll = () => { hasUserScrolled = true; };
        window.addEventListener('wheel', onUserScroll, { passive: true });
        window.addEventListener('touchmove', onUserScroll, { passive: true });
        window.addEventListener('keydown', (e) => {
            // 키보드 스크롤(화살표/스페이스/pgUp/pgDn 등)
            const keys = ['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight', 'PageDown', 'PageUp', 'Home', 'End', ' '];
            if (keys.includes(e.key)) hasUserScrolled = true;
        });

        // (권장) 이미지 프리로드
        for (let i = 1; i <= maxIndex; i++) {
            const pre = new Image();
            pre.src = `images/kimyujin${i}.png`;
        }

        // GSAP fromTo
        const tl = gsap.fromTo(
            state,
            { frame: 1 },
            {
                frame: maxIndex,
                ease: "none",
                snap: { frame: 1 },
                immediateRender: false,
                scrollTrigger: {
                    trigger: "#section1",
                    start: "bottom 80%",
                    end: "+=2500",
                    scrub: true,
                    // pin: true,

                    // 섹션이 활성화되더라도, 사용자가 실제 스크롤하기 전엔 1프레임 고정
                    onUpdate: (self) => {
                        let idx = Math.round(state.frame);

                        if (!hasUserScrolled) {
                            idx = 1;           // 강제 1프레임
                            state.frame = 1;
                        }

                        idx = Math.min(maxIndex, Math.max(1, idx));
                        img.src = `images/kimyujin${idx}.png`;

                        if (idx > 12) {
                            water.style.display = 'block';
                            water.style.bottom = `-80px`;
                        } else {
                            water.style.display = 'none';
                            water.style.bottom = '-80px';
                        }
                        img.style.opacity = (idx > 13) ? '0.5' : '1';
                    },

                    // 뷰포트 밖일 땐 고정(위=1, 아래=max)
                    onToggle: (self) => {
                        if (!self.isActive) {
                            const idx = self.progress <= 0 ? 1 : maxIndex;
                            state.frame = idx;
                            img.src = `images/kimyujin${idx}.png`;
                            img.style.opacity = (idx > 13) ? '0.5' : '1';
                        }
                    }
                }
            }
        );

        // 3) 모든 리소스 로드 뒤, 꼭 맨 위로 올리고 refresh
        window.addEventListener('load', () => {
            window.scrollTo(0, 0);         // 최상단으로
            ScrollTrigger.refresh();       // 위치 재계산
        });
    </script>

    </script>
    <script>

        const lenis = new Lenis()

        lenis.on('scroll', (e) => {
            console.log(e)
        })

        function raf(time) {
            lenis.raf(time)
            requestAnimationFrame(raf)
        }

        requestAnimationFrame(raf)



        // 04 : 이미지 축소하기
        const ani1 = gsap.timeline();
        ani1.fromTo("#section1 .t1", { y: 100, opacity: 0 }, { y: 0, opacity: 1 })
            .fromTo("#section1 .t2", { y: 100, opacity: 0 }, { y: 0, opacity: 1 })
            .fromTo("#section1 .t3", { y: 100, opacity: 0 }, { y: 0, opacity: 1 })
            .fromTo(".moon_box", { scale: 1 }, { scale: 0.5 })

        ScrollTrigger.create({
            animation: ani1,
            trigger: "#section1",
            start: "top top",
            end: "100% top",
            scrub: true,
            pin: true,
            anticipatePin: 1,
            markers: false
        });


        // let sections = gsap.utils.toArray(".profile-image ul li");

        // gsap.to(sections, {
        //     xPercent: -100 * (sections.length -1),
        //     ease: "none",
        //     scrollTrigger: {
        //         trigger: "#section3",
        //         pin: true,
        //         scrub: 1,
        //         snap: 1 / (sections.length -1),
        //     }
        // })


        const horizontal = document.querySelector("#section3");
        const sections = gsap.utils.toArray(".profile-image ul li ");

        let scrollTween = gsap.to(sections, {
            xPercent: -100 * (sections.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: horizontal,
                start: "top top",
                end: "+=2000",
                pin: true,
                ainicipatePin: 1,
                scrub: 1,
                invalidateOnRefresh: true,
                snap: 1 / (sections.length - 1),

            }
        });

        gsap.to(".profile1", {
            y: -200,
            duration: 2,
            ease: "elastic",
            scrollTrigger: {
                trigger: ".img4",
                containerAnimation: scrollTween,
                start: "left center",
                toggleActions: "play none reverse none",
                markers: false,
            }
        });

        gsap.to(".profile2", {
            rotation: 720,
            duration: 2,
            ease: "elastic",
            scrollTrigger: {
                trigger: ".img5",
                containerAnimation: scrollTween,
                start: "left center",
                toggleActions: "play none reverse none",
                markers: false,
            }
        });

        gsap.to(".profile3", {
            scale: 0.3,
            duration: 2,
            ease: "elastic",
            scrollTrigger: {
                trigger: ".img6",
                containerAnimation: scrollTween,
                start: "left center",
                toggleActions: "play none reverse none",
                markers: false,
            }
        });


        //02 : 텍스트 제자리 애니메이션
        const ani2 = gsap.timeline();
        ani2.fromTo("#section2 .text", {y:400,autoAlpha:0}, {y:0,autoAlpha:0.5})
        ani2.fromTo("#section2 .text", {letterSpacing: 0,autoAlpha:0.5}, {letterSpacing: 100,autoAlpha:1})

        ScrollTrigger.create({
            animation: ani2,
            trigger: "#section2",
            start: "top top",
            end: "bottom 70%",
            scrub: true,
            anticipatePin: 1,
            markers: true
        });
    </script>
</body>

</html>